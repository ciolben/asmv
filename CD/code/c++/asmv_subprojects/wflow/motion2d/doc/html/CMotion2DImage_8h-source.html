<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Motion2D: a software to estimate 2D parametric motion models</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta content="Motion2D: dominant motion estimation" name=description>
<meta content="Motion2D,motion estimation,motion models,image processing" 
name=KeyWords>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>

<center>
<a href="http://www.irisa.fr/vista/Vista.english.html"><img src="logo-vista3.gif" alt="Vista" align=middle border=0></a> &nbsp;&nbsp;&nbsp;

<a href="index.html">Main Page</a> &nbsp;

<a href="annotated.html">Class List</a> &nbsp;

<a href="functions.html">Function List</a> &nbsp;

<a href="files.html">File List</a> &nbsp;

<a href="examples.html">Examples</a> &nbsp;
</center>

<hr>
<br>
<!-- Generated by Doxygen 1.2.18 -->
<h1>CMotion2DImage.h</h1><a href="CMotion2DImage_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"></span>
00003 <span class="comment">  Copyright (c) 1995-2005 by INRIA.</span>
00004 <span class="comment">  All Rights Reserved.</span>
00005 <span class="comment"></span>
00006 <span class="comment">  This software was developed at:</span>
00007 <span class="comment">  IRISA/INRIA Rennes</span>
00008 <span class="comment">  Campus Universitaire de Beaulieu</span>
00009 <span class="comment">  35042 Rennes Cedex</span>
00010 <span class="comment"></span>
00011 <span class="comment">  http://www.irisa.fr</span>
00012 <span class="comment"></span>
00013 <span class="comment">*/</span>
00014 
00080 <span class="preprocessor">#ifndef CMotion2DImage_h</span>
00081 <span class="preprocessor"></span><span class="preprocessor">#define CMotion2DImage_h</span>
00082 <span class="preprocessor"></span>
00083 <span class="preprocessor">#ifdef __SunOS_</span>
00084 <span class="preprocessor"></span><span class="preprocessor"># include &lt;iostream.h&gt;</span>
00085 <span class="preprocessor">#else</span>
00086 <span class="preprocessor"></span><span class="preprocessor"># include &lt;iostream&gt;</span>
00087 <span class="preprocessor">#endif</span>
00088 <span class="preprocessor"></span><span class="preprocessor">#include &lt;math.h&gt;</span>
00089 
00090 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00091 
00092 <span class="preprocessor">#if defined (WIN32)</span>
00093 <span class="preprocessor"></span><span class="preprocessor">#  if defined MOTION2D_DLL_EXPORTS</span>
00094 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API __declspec( dllexport )</span>
00095 <span class="preprocessor"></span><span class="preprocessor">#  elif defined MOTION2D_DLL_IMPORTS</span>
00096 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API __declspec( dllimport )</span>
00097 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
00098 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API</span>
00099 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00100 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00101 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API</span>
00102 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00103 <span class="preprocessor"></span>
00104 <span class="preprocessor">#ifndef FILENAME_MAX</span>
00105 <span class="preprocessor"></span><span class="preprocessor">#  define FILENAME_MAX 1024</span>
00106 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00107 <span class="preprocessor"></span>
00108 
00109 <span class="preprocessor">#define DEBUG_LEVEL1 0</span>
00110 <span class="preprocessor"></span>
<a name="l00121"></a><a class="code" href="CMotion2DImage_8h.html#a3">00121</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="CMotion2DImage_8h.html#a3">sort</a>(<span class="keywordtype">unsigned</span> n, T* ra)
00122 {
00123   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> l,j,ir,i;
00124   T rra;
00125   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> min,max;
00126 
00127   <span class="keywordflow">if</span> (DEBUG_LEVEL1) cout &lt;&lt; <span class="stringliteral">"Begin sort()"</span> &lt;&lt; endl;
00128   <span class="keywordflow">if</span> (n == 0)
00129     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00130 
00131   <span class="keywordflow">if</span> (n == 1)
00132     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00133 
00134   min=n+1;
00135   max= 0; <span class="comment">// -1 Modif FS 13/05/04</span>
00136   l=(n &gt;&gt; 1)+1;
00137   ir=n;
00138   <span class="keywordflow">for</span> (;;) {
00139     <span class="keywordflow">if</span> (l &gt; 1)
00140       rra=ra[--l];
00141     <span class="keywordflow">else</span> {
00142       rra=ra[ir];
00143       ra[ir]=ra[1];
00144       <span class="keywordflow">if</span> (ir&gt;max) max=ir;
00145       <span class="keywordflow">if</span> (ir&lt;min) min=ir;
00146       <span class="keywordflow">if</span> (--ir == 1) {
00147         ra[1]=rra;
00148 
00149         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00150       }
00151     }
00152     i=l;
00153     j=l &lt;&lt; 1;
00154     <span class="keywordflow">while</span> (j &lt;= ir) {
00155       <span class="keywordflow">if</span> (j+1&gt;max) max=j+1;
00156       <span class="keywordflow">if</span> (j&lt;min) min=j;
00157       <span class="keywordflow">if</span> (j &lt; ir &amp;&amp; ra[j] &lt; ra[j+1]) ++j;
00158       <span class="keywordflow">if</span> (rra &lt; ra[j]) {
00159         <span class="keywordflow">if</span> (i&gt;max) max=i;
00160         <span class="keywordflow">if</span> (i&lt;min) min=i;
00161         ra[i]=ra[j];
00162         j += (i=j);
00163       }
00164       <span class="keywordflow">else</span> j=ir+1;
00165     }
00166     <span class="keywordflow">if</span> (i&gt;max) max=i;
00167     <span class="keywordflow">if</span> (i&lt;min) min=i;
00168     ra[i]=rra;
00169   }
00170   <span class="keywordflow">if</span> (DEBUG_LEVEL1) cout &lt;&lt; <span class="stringliteral">"End sort()"</span> &lt;&lt; endl;
00171   <span class="keywordflow">return</span> <span class="keyword">true</span>;
00172 }
00173 
00174 
00175 
00176 
00177 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Type&gt;
<a name="l00178"></a><a class="code" href="classCMotion2DImage.html">00178</a> <span class="keyword">class </span><a class="code" href="classCMotion2DImage.html">CMotion2DImage</a>
00179 {
00180 <span class="keyword">private</span>:
00181   <span class="keywordtype">unsigned</span> npixels;
00182   <span class="keywordtype">unsigned</span> ncols ;
00183   <span class="keywordtype">unsigned</span> nrows ;
00184 
00185 <span class="keyword">public</span>:
<a name="l00186"></a><a class="code" href="classCMotion2DImage.html#m0">00186</a>   Type *<a class="code" href="classCMotion2DImage.html#m0">bitmap</a> ; 
<a name="l00187"></a><a class="code" href="classCMotion2DImage.html#m1">00187</a>   Type **<a class="code" href="classCMotion2DImage.html#m1">row</a> ; 
00189 <span class="keyword">public</span>:
00190   <a class="code" href="classCMotion2DImage.html#a0">CMotion2DImage</a>() ;
00191   <span class="comment">//copy constructors</span>
00192   <a class="code" href="classCMotion2DImage.html#a0">CMotion2DImage</a>(<span class="keyword">const</span> <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a>&amp;);
00193   <a class="code" href="classCMotion2DImage.html#a0">CMotion2DImage</a>(<span class="keywordtype">unsigned</span> nb_rows, <span class="keywordtype">unsigned</span> nb_cols);
00194   <a class="code" href="classCMotion2DImage.html#a0">CMotion2DImage</a>(<span class="keywordtype">unsigned</span> nb_rows, <span class="keywordtype">unsigned</span> nb_cols, Type value);
00195   <a class="code" href="classCMotion2DImage.html#a4">~CMotion2DImage</a>() ;
00196 
00197   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a5">Init</a>(<span class="keywordtype">unsigned</span> nb_rows, <span class="keywordtype">unsigned</span> nb_cols);
00198   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a5">Init</a>(<span class="keywordtype">unsigned</span> nb_rows, <span class="keywordtype">unsigned</span> nb_cols, Type value);
00199 
00200   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a7">Resize</a>(<span class="keywordtype">unsigned</span> nb_rows, <span class="keywordtype">unsigned</span> nb_cols);
00201   <span class="keywordtype">void</span> <a class="code" href="classCMotion2DImage.html#a8">Subsample</a>();
00202   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a9">And</a>(<a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;A, <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;B);
00203   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a9">And</a>(<a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;A, <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;B, Type label);
00204   <span class="keywordtype">bool</span> <a class="code" href="classCMotion2DImage.html#a11">MedianFilter</a>(<span class="keywordtype">unsigned</span> filterRowSize, <span class="keywordtype">unsigned</span> filterColSize);
00205 
<a name="l00211"></a><a class="code" href="classCMotion2DImage.html#a12">00211</a>   <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="classCMotion2DImage.html#a12">GetRows</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> nrows ; }
<a name="l00217"></a><a class="code" href="classCMotion2DImage.html#a13">00217</a>   <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="classCMotion2DImage.html#a13">GetCols</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ncols ; }
<a name="l00224"></a><a class="code" href="classCMotion2DImage.html#a14">00224</a>   <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="classCMotion2DImage.html#a14">GetNumberOfPixel</a>()<span class="keyword"> const</span>{ <span class="keywordflow">return</span> npixels; }
00225 
<a name="l00232"></a><a class="code" href="classCMotion2DImage.html#a15">00232</a>   Type *<a class="code" href="classCMotion2DImage.html#a15">operator[]</a>(<span class="keywordtype">unsigned</span> i) {<span class="keywordflow">return</span> <a class="code" href="classCMotion2DImage.html#m1">row</a>[i];}
<a name="l00239"></a><a class="code" href="classCMotion2DImage.html#a16">00239</a>   <span class="keyword">const</span>  Type *<a class="code" href="classCMotion2DImage.html#a15">operator[]</a>(<span class="keywordtype">unsigned</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classCMotion2DImage.html#m1">row</a>[i];}
00240 
00241 
00242   <span class="keywordtype">void</span> <a class="code" href="classCMotion2DImage.html#a17">operator=</a>(Type x);
00243 
00244   <span class="keywordtype">void</span> <a class="code" href="classCMotion2DImage.html#a17">operator=</a>(<span class="keyword">const</span> <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;image);
00245 
00246   <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> <a class="code" href="classCMotion2DImage.html#a19">operator-</a>(<span class="keyword">const</span> <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;Type&gt;</a> &amp;image);
00247 
00248 <span class="keyword">private</span>:
00254   <span class="keywordtype">void</span> SetCols(<span class="keywordtype">unsigned</span> nb_cols) { ncols = nb_cols ; } ;
00260   <span class="keywordtype">void</span> SetRows(<span class="keywordtype">unsigned</span> nb_rows) { nrows = nb_rows ; } ;
00261 
00262 
00263 } ;
00264 
00265 
00266 <span class="preprocessor">#include &lt;<a class="code" href="CMotion2DImage__base_8cpp.html">CMotion2DImage_base.cpp</a>&gt;</span>
00267 
00268 <span class="comment">// Include for image ios</span>
00269 <span class="preprocessor">#include "<a class="code" href="Motion2DImage__PNM_8h.html">Motion2DImage_PNM.h</a>"</span>
00270 <span class="preprocessor">#include "<a class="code" href="Motion2DImage__RAW_8h.html">Motion2DImage_RAW.h</a>"</span>
00271 <span class="preprocessor">#include "<a class="code" href="Motion2DImage__PNG_8h.html">Motion2DImage_PNG.h</a>"</span>
00272 
00273 <span class="preprocessor">#undef DEBUG_LEVEL1</span>
00274 <span class="preprocessor"></span>
00275 
00276 <span class="preprocessor">#endif</span>
</pre></div><hr> 
<address><small>Motion2D is Copyright &copy; 1995-2005 by <a href="http://www.inria.fr/index.en.html">Inria</a></small></address>
<address><small>This documentation was generated on 31 Jan 2005 by Fabien Spindler for 
Motion2D 1.3.11 using <a href="http://www.doxygen.org/index.html"> 
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=77 height=37></a>1.2.18 written by <a href="mailto:dimitri@stack.nl">Dimitri 
van Heesch</a>, &copy;&nbsp;1997-2005</small></address>
</body>
</html>
