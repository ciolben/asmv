<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Motion2D: a software to estimate 2D parametric motion models</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta content="Motion2D: dominant motion estimation" name=description>
<meta content="Motion2D,motion estimation,motion models,image processing" 
name=KeyWords>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>

<center>
<a href="http://www.irisa.fr/vista/Vista.english.html"><img src="logo-vista3.gif" alt="Vista" align=middle border=0></a> &nbsp;&nbsp;&nbsp;

<a href="index.html">Main Page</a> &nbsp;

<a href="annotated.html">Class List</a> &nbsp;

<a href="functions.html">Function List</a> &nbsp;

<a href="files.html">File List</a> &nbsp;

<a href="examples.html">Examples</a> &nbsp;
</center>

<hr>
<br>
<!-- Generated by Doxygen 1.2.18 -->
<h1>CMotion2D.h</h1><a href="CMotion2D_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"></span>
00003 <span class="comment">  Copyright (c) 1995-2005 by INRIA.</span>
00004 <span class="comment">  All Rights Reserved.</span>
00005 <span class="comment"></span>
00006 <span class="comment">  This software was developed at:</span>
00007 <span class="comment">  IRISA/INRIA Rennes</span>
00008 <span class="comment">  Campus Universitaire de Beaulieu</span>
00009 <span class="comment">  35042 Rennes Cedex</span>
00010 <span class="comment"></span>
00011 <span class="comment">  http://www.irisa.fr</span>
00012 <span class="comment"></span>
00013 <span class="comment">*/</span>
00014 
00020 <span class="preprocessor">#ifndef CMotion2D_h</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define CMotion2D_h</span>
00022 <span class="preprocessor"></span>
00023 <span class="comment">// Include for Motion2D</span>
00024 <span class="preprocessor">#include "<a class="code" href="CMotion2DImage_8h.html">CMotion2DImage.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="CMotion2DEstimator_8h.html">CMotion2DEstimator.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="CMotion2DPyramid_8h.html">CMotion2DPyramid.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="CMotion2DModel_8h.html">CMotion2DModel.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="CMotion2DWarping_8h.html">CMotion2DWarping.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="CReader_8h.html">CReader.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="CWriter_8h.html">CWriter.h</a>"</span>
00031 
00032 
00033 <span class="preprocessor">#define GETOPTARGS "a:b:c:d:e:f:ghi:j:k:l:m:n:o:p:q:r:s:t:u:vw:x:y:z?C:F:IR:"</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define max(a,b) (a&gt;b?a:b)</span>
00035 <span class="preprocessor"></span>
00036 <span class="preprocessor">#if defined (WIN32)</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#  if defined MOTION2D_DLL_EXPORTS</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API __declspec( dllexport )</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#  elif defined MOTION2D_DLL_IMPORTS</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API __declspec( dllimport )</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#     define MOTION2D_API</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00047 <span class="preprocessor"></span>
00048 
00049 
<a name="l00050"></a><a class="code" href="classCMotion2D.html">00050</a> <span class="keyword">class </span>MOTION2D_API <a class="code" href="classCMotion2D.html">CMotion2D</a> {
00051 
00052  <span class="keyword">public</span>:
00053   <a class="code" href="classCMotion2D.html">CMotion2D</a>();
00054   ~<a class="code" href="classCMotion2D.html">CMotion2D</a>();
00055   <span class="keywordtype">void</span> printHeaderResults(FILE *output, <a class="code" href="classCMotion2DModel.html">CMotion2DModel</a> model,
00056                           <span class="keywordtype">double</span> multfactor);
00057   <span class="keywordtype">void</span> printResults(FILE *output, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i1, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i2,
00058                     <a class="code" href="classCMotion2DModel.html">CMotion2DModel</a> model, <span class="keywordtype">double</span> support_size,
00059                     <span class="keywordtype">unsigned</span> nbsubsample, <span class="keywordtype">double</span> multfactor);
00060   <span class="keywordtype">void</span> printVresResults(FILE * output, <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;float&gt;</a> &amp;Vres,
00061                         <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;unsigned char&gt;</a> &amp;Map, string dpath,
00062                         <span class="keywordtype">int</span> frame);
00063   <span class="keywordtype">int</span>  getoption (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">char</span>* pszValidOpts, <span class="keywordtype">char</span>** ppszParam);
00064   <span class="keywordtype">void</span> getoptions(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv);
00065   <span class="keywordtype">int</span>  main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv);
00066   <span class="keywordtype">int</span>  testReader(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv);
00067   <span class="keywordtype">void</span> usage(<span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *badparam);
00068   <span class="keywordtype">void</span> setReader(<a class="code" href="classCReader.html">CReader</a> *);
00069   <span class="keywordtype">void</span> getVres(<a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;float&gt;</a>&amp;,<a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;unsigned char&gt;</a>&amp;, <span class="keywordtype">int</span>);
00070   <span class="keywordtype">void</span> free();
00071   <span class="keywordtype">unsigned</span> getNbSubsample();
00072   <a class="code" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;getMotion2DModel();
00073 
00074  <span class="keyword">private</span>:
00075   <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;short&gt;</a> I;              <span class="comment">// Image</span>
00076   <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;unsigned char&gt;</a> S;      <span class="comment">// Motion estimator support</span>
00077   <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;short&gt;</a> B;              <span class="comment">// Backwarped image</span>
00078   <a class="code" href="classCMotion2DImage.html">CMotion2DImage&lt;unsigned char&gt;</a> W;      <span class="comment">// M-estimator weights image</span>
00079   <a class="code" href="classCMotion2DEstimator.html">CMotion2DEstimator</a>    estimator;      <span class="comment">// Motion estimator</span>
00080   <a class="code" href="classCMotion2DModel.html">CMotion2DModel</a>        model;          <span class="comment">// Parametric motion model</span>
00081   <a class="code" href="classCMotion2DPyramid.html">CMotion2DPyramid</a>      pyramid1;       <span class="comment">// Pyramid on image 1</span>
00082   <a class="code" href="classCMotion2DPyramid.html">CMotion2DPyramid</a>      pyramid2;       <span class="comment">// Pyramid on image 2</span>
00083   <a class="code" href="classCMotion2DWarping.html">CMotion2DWarping</a>      warping;        <span class="comment">// Warping</span>
00084 
00085   string ipath ;                <span class="comment">// Image path</span>
00086   string filename;              <span class="comment">// Complete filename for an image of the video</span>
00087   string rpath;                 <span class="comment">// Result filename to store the model</span>
00088   string opath;                 <span class="comment">// Result filename for residual motion</span>
00089   string bpath;                 <span class="comment">// Back-warped image path</span>
00090   string wpath;                 <span class="comment">// M-estimator weights image path</span>
00091   string dpath;                 <span class="comment">// Residual motion image path</span>
00092   string spath;                 <span class="comment">// Estimation support path</span>
00093   string Fpath;                 <span class="comment">// Optic flow path</span>
00094 
00095   <span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> niter ;         <span class="comment">// Number of images to process</span>
00096   <span class="keywordtype">int</span>  step;                    <span class="comment">// Step between 2 images</span>
00097   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> label;          <span class="comment">// Value of the motion estimator support</span>
00098   <span class="keywordtype">int</span> slabel;                   <span class="comment">// Value of the motion estimator support</span>
00099   string model_id;              <span class="comment">// Parametric motion model ID to estimate</span>
00100   <span class="keywordtype">bool</span> var_light;               <span class="comment">// Lighting variation parameter estimation</span>
00101   <span class="keywordtype">bool</span> model_orig_fixed;        <span class="comment">// Indicates if an origin is fixed</span>
00102   <span class="keywordtype">double</span> model_row_orig;        <span class="comment">// Motion model origin (line coordinate)</span>
00103   <span class="keywordtype">double</span> model_col_orig ;       <span class="comment">// Motion model origin (column coordinate)</span>
00104   <span class="keywordtype">unsigned</span> pyr_nlevels;         <span class="comment">// Number of levels in a multi-resolution pyr</span>
00105   <span class="keywordtype">unsigned</span> pyr_stop_level;      <span class="comment">// Pyramid level where the estimator stops</span>
00106   <span class="keywordtype">bool</span> verbose;                 <span class="comment">// Verbose mode</span>
00107   <span class="keywordtype">bool</span> support_empty;           <span class="comment">// Indicates if the support is empty.</span>
00108 
00109   <span class="keywordtype">int</span> b_ncols, b_nrows;         <span class="comment">// Back-warped image size</span>
00110   <span class="keywordtype">int</span> b_col_orig, b_row_orig;   <span class="comment">// Back-warped origin in image frame</span>
00111   <span class="keywordtype">bool</span> compute_covariance;      <span class="comment">// Flag to compute the covariance matrix</span>
00112   <span class="keywordtype">unsigned</span> nbsubsample;         <span class="comment">// Images spatial resolution: 0 full, 1 mid...</span>
00113 
00114   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> frame;          <span class="comment">// Current frame number processed</span>
00115   <span class="keywordtype">double</span> multfactor;            <span class="comment">// Multiplier factor for motion parameters</span>
00116   <span class="keywordtype">unsigned</span> raw_nrows;           <span class="comment">// Number of rows for RAW8 or RAW16 images</span>
00117   <span class="keywordtype">unsigned</span> raw_ncols;           <span class="comment">// Number of cols for RAW8 or RAW16 images</span>
00118   <span class="keywordtype">bool</span> useModelAsInitialization; <span class="comment">// How is the estimated model init</span>
00119 
00120   <a class="code" href="classCReader.html">CReader</a> *Ireader;             <span class="comment">// Image reader</span>
00121   <a class="code" href="classCReader.html">CReader</a> *Sreader;             <span class="comment">// Support reader</span>
00122   <a class="code" href="classCWriter.html">CWriter</a> *writer;              <span class="comment">// Image writer</span>
00123 };
00124 
00125 <span class="preprocessor">#endif</span>
</pre></div><hr> 
<address><small>Motion2D is Copyright &copy; 1995-2005 by <a href="http://www.inria.fr/index.en.html">Inria</a></small></address>
<address><small>This documentation was generated on 31 Jan 2005 by Fabien Spindler for 
Motion2D 1.3.11 using <a href="http://www.doxygen.org/index.html"> 
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=77 height=37></a>1.2.18 written by <a href="mailto:dimitri@stack.nl">Dimitri 
van Heesch</a>, &copy;&nbsp;1997-2005</small></address>
</body>
</html>
