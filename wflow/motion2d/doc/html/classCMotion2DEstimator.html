<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Motion2D: a software to estimate 2D parametric motion models</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta content="Motion2D: dominant motion estimation" name=description>
<meta content="Motion2D,motion estimation,motion models,image processing" 
name=KeyWords>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>

<center>
<a href="http://www.irisa.fr/vista/Vista.english.html"><img src="logo-vista3.gif" alt="Vista" align=middle border=0></a> &nbsp;&nbsp;&nbsp;

<a href="index.html">Main Page</a> &nbsp;

<a href="annotated.html">Class List</a> &nbsp;

<a href="functions.html">Function List</a> &nbsp;

<a href="files.html">File List</a> &nbsp;

<a href="examples.html">Examples</a> &nbsp;
</center>

<hr>
<br>
<!-- Generated by Doxygen 1.2.18 -->
<h1>CMotion2DEstimator Class Reference</h1>The CMotion2DEstimator class implements the robust multiresolution estimation of the parametric motion model. 
<a href="#_details">More...</a>
<p>
<a href="classCMotion2DEstimator-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction</a> { <a class="el" href="classCMotion2DEstimator.html#s7s0">Tukey</a>, 
<a class="el" href="classCMotion2DEstimator.html#s7s1">Talwar</a>, 
<a class="el" href="classCMotion2DEstimator.html#s7s2">Cauchy</a>, 
<a class="el" href="classCMotion2DEstimator.html#s7s3">Welsh</a>
 }</td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#s8">ECConstType</a> { <a class="el" href="classCMotion2DEstimator.html#s8s4">CConst_Fixed</a>, 
<a class="el" href="classCMotion2DEstimator.html#s8s5">CConst_Classic</a>, 
<a class="el" href="classCMotion2DEstimator.html#s8s6">CConst_Robust</a>
 }</td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a0">CMotion2DEstimator</a> ()</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a1">~CMotion2DEstimator</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a2">estimate</a> (const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;pyramid1, const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;pyramid2, const short *support, short label, <a class="el" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;model, bool useModelAsInitialization=false)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a3">estimate</a> (const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;pyramid1, const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;pyramid2, const unsigned char *support, unsigned char label, <a class="el" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;model, bool useModelAsInitialization=false)</td></tr>
<tr><td nowrap align=right valign=top>float *&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a4">getWeights</a> (int &amp;n_rows, int &amp;n_cols)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a5">setRobustEstimator</a> (bool robust=true)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a6">setRobustFunction</a> (<a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction</a> function=Tukey)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a7">setCConstant</a> (<a class="el" href="classCMotion2DEstimator.html#s8">ECConstType</a> C_type=CConst_Fixed, double C=8.0)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS</a> (int niter=8)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a9">setNIterationMaxLevel</a> (int niter=7)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a10">setLevelParameterIntroduction</a> (int level_const=-1, int level_affine=-1, int level_quadratic=-1)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel</a> (unsigned level=3)</td></tr>
<tr><td nowrap align=right valign=top>unsigned&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a12">getFirstEstimationLevel</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a13">setLastEstimationLevel</a> (unsigned level=0)</td></tr>
<tr><td nowrap align=right valign=top>unsigned&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a14">getLastEstimationLevel</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a15">setReliableSupportRate</a> (float rate=0.4)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a16">computeSupportSize</a> (bool compute=true, float threshold=0.2f)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a17">isSupportSizeComputed</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a18">getSupportSize</a> (double &amp;size)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a19">computeResidualVariance</a> (bool compute=false)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a20">isResidualVarianceComputed</a> ()</td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a21">getResidualVariance</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a22">computeCovarianceMatrix</a> (bool compute=false)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a23">isCovarianceMatrixComputed</a> ()</td></tr>
<tr><td nowrap align=right valign=top>double *&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a24">getCovarianceMatrix</a> (int &amp;n_rows, int &amp;n_cols)</td></tr>
<tr><td nowrap align=right valign=top>float *&nbsp;</td><td valign=bottom><a class="el" href="classCMotion2DEstimator.html#a27">getDFDDataAddress</a> (int level, int &amp;n_rows, int &amp;n_cols)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The CMotion2DEstimator class implements the robust multiresolution estimation of the parametric motion model.
<p>
We consider the displaced frame difference corresponding to the motion model:
<p>
<p><center>
<img align="top" src="form_10.png">
</center><p>

<p>
where <img align="top" src="form_11.png">
 and <img align="top" src="form_12.png">
 are two successive images, <img align="top" src="form_13.png">
 the motion model to estimate (including a global intensity shift <img align="top" src="form_14.png">
 to account for global illumination change) and
<p>
<p><center>
<img align="top" src="form_1.png">
</center><p>

<p>
denotes the flow vector modeled at the image point <img align="top" src="form_6.png">
.
<p>
To ensure the goal of robustness, we introduce a M-estimation criterion with a hard-redescending robust estimator. Thus, the motion model is given by:
<p>
<a name="equation1"></a>
<p>
<p><center>
<img align="top" src="form_15.png">
</center><p>

<p>
where <img align="top" src="form_16.png">
 is the Tukey, Talwar, Cauchy or Welsh biweight function which is bounded for high values of <img align="top" src="form_17.png">
 and <img align="top" src="form_18.png">
 a scale parameter to be set.
<p>
The estimation support <img align="top" src="form_19.png">
 usually consists of the whole image. If required, it can also be restricted to a specific area of the image. The minimization is embedded in a multiresolution and incremental scheme based on the Gauss-Newton method. At each incremental step <img align="top" src="form_20.png">
 (at a given resolution level, or from a resolution level to a finer one), we have:
<p>
<a name="equation2"></a>
<p>
<p><center>
<img align="top" src="form_21.png">
</center><p>

<p>
where <img align="top" src="form_22.png">
 is the current estimate of the parameter vector <img align="top" src="form_23.png">
. A linearization of <img align="top" src="form_24.png">
 around <img align="top" src="form_22.png">
 is performed, leading to the expression <img align="top" src="form_25.png">
 linear with respect to <img align="top" src="form_26.png">
:
<p>
<p><center>
<img align="top" src="form_27.png">
</center><p>

<p>
where <img align="top" src="form_28.png">
 denotes the spatial gradient of the intensity function at location <img align="top" src="form_29.png">
 and at time <img align="top" src="form_30.png">
. Then, we substitute for the minimization of <img align="top" src="form_31.png">
 the minimization of the expression given by:
<p>
<p><center>
<img align="top" src="form_32.png">
</center><p>

<p>
which is equivalent to minimizing:
<p>
<a name="equation3"></a>
<p>
<p><center>
<img align="top" src="form_33.png">
</center><p>

<p>
with
<p>
<a name="equation4"></a>
<p>
<p><center>
<img align="top" src="form_34.png">
</center><p>

<p>
where <img align="top" src="form_35.png">
 is the derivative of the <img align="top" src="form_36.png">
 function. The error function <img align="top" src="form_37.png">
 is minimized using an Iterative-Reweighted-Least-Squares procedure, with 0 as an initial value for <img align="top" src="form_26.png">
. For more details about the method and its performances, see the Motion-2D related references. <dl compact><dt><b>Examples: </b></dt><dd>

<p>
<a class="el" href="Motion2D_8cpp-example.html#_a3">Motion2D.cpp</a>.</dl>
<p>
<hr><h2>Member Enumeration Documentation</h2>
<a name="s8" doxytag="CMotion2DEstimator::ECConstType"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum CMotion2DEstimator::ECConstType
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Describes the way in which the <img align="top" src="form_18.png">
 constant evolves between two successive estimations.
<p>
At the beginning of the process, the estimator must be rather tolerant to outliers; thus, <img align="top" src="form_18.png">
 is set to a large value (typically equal to the largest absolute temporal intensity difference). Then, as the accuracy of the dominant motion estimate improves, outliers are better identified and should be rejected. Therefore, <img align="top" src="form_18.png">
 is lowered at each computation of a new increment <img align="top" src="form_26.png">
, using the following schedule: <img align="top" src="form_68.png">
 until it reaches a preset value <img align="top" src="form_69.png">
, or a robustly estimated value <img align="top" src="form_70.png">
.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a7">setCConstant()</a>, <a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction</a> </dl><dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a name="s8s4" doxytag="CConst_Fixed"></a><em>CConst_Fixed</em></em>&nbsp;</td><td>
The <img align="top" src="form_18.png">
 constant does not change between two estimations of <img align="top" src="form_26.png">
. </td></tr>
<tr><td valign=top><em><a name="s8s5" doxytag="CConst_Classic"></a><em>CConst_Classic</em></em>&nbsp;</td><td>
The <img align="top" src="form_18.png">
 constant is lowered at each computation of a new increment according to the formula <img align="top" src="form_68.png">
. </td></tr>
<tr><td valign=top><em><a name="s8s6" doxytag="CConst_Robust"></a><em>CConst_Robust</em></em>&nbsp;</td><td>
The <img align="top" src="form_18.png">
 constant is robustly estimated. </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a name="s7" doxytag="CMotion2DEstimator::ERobustFunction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum CMotion2DEstimator::ERobustFunction
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Defines implemented robust functions <img align="top" src="form_16.png">
 that can be used to compute the weights <img align="top" src="form_38.png">
.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a6">setRobustFunction()</a>, <a class="el" href="classCMotion2DEstimator.html#s8">ECConstType</a> </dl><dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a name="s7s0" doxytag="Tukey"></a><em>Tukey</em></em>&nbsp;</td><td>
Tukey biweight function: if <img align="top" src="form_79.png">
 otherwise <img align="top" src="form_80.png">
 </td></tr>
<tr><td valign=top><em><a name="s7s1" doxytag="Talwar"></a><em>Talwar</em></em>&nbsp;</td><td>
Talwar biweight function: if <img align="top" src="form_81.png">
 otherwise <img align="top" src="form_82.png">
 </td></tr>
<tr><td valign=top><em><a name="s7s2" doxytag="Cauchy"></a><em>Cauchy</em></em>&nbsp;</td><td>
Cauchy function: <img align="top" src="form_83.png">
 </td></tr>
<tr><td valign=top><em><a name="s7s3" doxytag="Welsh"></a><em>Welsh</em></em>&nbsp;</td><td>
Welsh function: <img align="top" src="form_84.png">
 </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="CMotion2DEstimator::CMotion2DEstimator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CMotion2DEstimator::CMotion2DEstimator </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructs a robust multiresolution estimator by implementing the iterative reweighted least squares (IRLS) technique.     </td>
  </tr>
</table>
<a name="a1" doxytag="CMotion2DEstimator::~CMotion2DEstimator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CMotion2DEstimator::~CMotion2DEstimator </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructs the multiresolution estimator, deleting all allocated memory.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a22" doxytag="CMotion2DEstimator::computeCovarianceMatrix"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::computeCovarianceMatrix </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>compute</em> = false          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If <em>compute</em> is true, computes the covariance matrix of the estimated 2D polynomial motion model parameters.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a23">isCovarianceMatrixComputed()</a>, <a class="el" href="classCMotion2DEstimator.html#a24">getCovarianceMatrix()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a31">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a19" doxytag="CMotion2DEstimator::computeResidualVariance"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::computeResidualVariance </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>compute</em> = false          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If <em>compute</em> is set as true, the residual variance of the estimated 2D polynomial motion model parameters is computed.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a20">isResidualVarianceComputed()</a> </dl>    </td>
  </tr>
</table>
<a name="a16" doxytag="CMotion2DEstimator::computeSupportSize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::computeSupportSize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>compute</em> = true, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>threshold</em> = 0.2f</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If <em>compute</em> is set as true, the normalized support size evaluated from the weights <img align="top" src="form_78.png">
 is computed. If the weight associated to a given pixel is greater than <em>threshold</em>, this pixel is considered as conform to the dominant motion. The support size corresponds to the ratio between the number of pixels conform to the estimated dominant motion and the size of the part of <img align="top" src="form_11.png">
 that is likely to overlap <img align="top" src="form_12.png">
.
<p>
The <em>threshold</em> value must belong to [0; 1[.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a18">getSupportSize()</a>, <a class="el" href="classCMotion2DEstimator.html#a17">isSupportSizeComputed()</a>, <a class="el" href="classCMotion2DEstimator.html#a4">getWeights()</a> </dl>    </td>
  </tr>
</table>
<a name="a3" doxytag="CMotion2DEstimator::estimate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::estimate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pyramid1</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pyramid2</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const unsigned char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>support</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>label</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>model</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>useModelAsInitialization</em> = false</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implements the estimation of a 2D parametric motion model.
<p>
This method differs from estimate(const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;, const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;, const short *, short, <a class="el" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;) only in the type of the estimation support <img align="top" src="form_19.png">
 which is here <em>unsigned</em> <em>char</em>.
<p>
Return true if the estimation process succeeds, false otherwise.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
estimate(const CMotion2DPyramid &amp;, const CMotion2DPyramid &amp;, const short *, short, CMotion2DModel &amp;) </dl>    </td>
  </tr>
</table>
<a name="a2" doxytag="CMotion2DEstimator::estimate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::estimate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pyramid1</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pyramid2</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const short *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>support</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>label</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classCMotion2DModel.html">CMotion2DModel</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>model</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>useModelAsInitialization</em> = false</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implements the estimation of a 2D parametric motion model.
<p>
Depending on <a class="el" href="classCMotion2DEstimator.html#a5">setRobustEstimator()</a> two different schemes can be used: either involving a robust multiresolution estimation implementing the IRLS technique, or involving a multiresolution least-mean-square estimation.
<p>
The estimation process is performed between images <img align="top" src="form_11.png">
 and <img align="top" src="form_12.png">
 for which the Gaussian and image gradient pyramids, denoted respectively <em>pyramid1</em> and <em>pyramid2</em>, must be built using <a class="el" href="classCMotion2DPyramid.html">CMotion2DPyramid</a>.
<p>
The parameter <em>support</em> refers to the estimation support <img align="top" src="form_19.png">
. In other terms, <em>support</em> indicates which pixels of the image <img align="top" src="form_11.png">
 are taken into account in the estimation process. The size of <em>support</em> must be equal to the size of the finest level in the pyramids (<em>pyramid1</em> or <em>pyramid2)</em>. It usually consists of the whole image. In that case, all <em>support</em> must be set to <em>label</em>. But, if required, it can also be restricted to a specific area of the image. In that case, all the pixels belonging to this area must be set to <em>label</em>. The other pixels must be set to another value than <em>label</em>.
<p>
An initialization of the motion <em>model</em> parameters does not affect the results. That means that the parameters of the motion model given as input are not used to initialize the estimator.
<p>
This function returns the estimated 2D parametric motion model in <em>model</em>. The returned parameters have to be considered for the highest resolution in the pyramids (level = 0) even if the last level considered in the estimation process is different when specified for example with setLastEstimationLevel(1). If the estimation process is stopped at a pyramid level different from 0, a projection of the motion model parameter to level 0 is performed. For the projection from one given level to the next finer one, the constant parameters of the model are multiplied by 2, the affine parameters are unchanged and the quadratic parameters are divided by 2.
<p>
The weight map can be obtained by <a class="el" href="classCMotion2DEstimator.html#a4">getWeights()</a>.
<p>
Returns true if the estimation process succeeds, false otherwise.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
estimate(const CMotion2DPyramid &amp;, const CMotion2DPyramid &amp;, const unsigned char *, unsigned char, CMotion2DModel &amp;), <a class="el" href="classCMotion2DEstimator.html#a5">setRobustEstimator()</a>, <a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a13">setLastEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a4">getWeights()</a>, </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a41">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a24" doxytag="CMotion2DEstimator::getCovarianceMatrix"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> double* CMotion2DEstimator::getCovarianceMatrix </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_rows</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_cols</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the address of the covariance matrix containing the covariance terms of the estimated parameters. The covariance matrix is bidimentional, with MAXCOEFSMODEL rows and MAXCOEFSMODEL colomns. If the matrix is not computed, the method returns NULL.
<p>
<dl compact><dt><b>Returns: </b></dt><dd>
true if the covariance matrix is computed, false otherwise.</dl><dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a22">computeCovarianceMatrix()</a>, <a class="el" href="classCMotion2DEstimator.html#a23">isCovarianceMatrixComputed()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a47">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a27" doxytag="CMotion2DEstimator::getDFDDataAddress"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float * CMotion2DEstimator::getDFDDataAddress </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>level</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_rows</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_cols</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the address of the DFD map for the level given as argument. Updates the dimension of the map.     </td>
  </tr>
</table>
<a name="a12" doxytag="CMotion2DEstimator::getFirstEstimationLevel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned CMotion2DEstimator::getFirstEstimationLevel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the pyramid level where the estimation process is started. Considerering the pyramids size, this level can be different from the level specified with <a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel()</a>. The returned value is updated after each call of the <a class="el" href="classCMotion2DEstimator.html#a2">estimate()</a> method.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a13">setLastEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a14">getLastEstimationLevel()</a> </dl>    </td>
  </tr>
</table>
<a name="a14" doxytag="CMotion2DEstimator::getLastEstimationLevel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned CMotion2DEstimator::getLastEstimationLevel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the pyramid level where the estimation process is stopped.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a13">setLastEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a12">getFirstEstimationLevel()</a> </dl>    </td>
  </tr>
</table>
<a name="a21" doxytag="CMotion2DEstimator::getResidualVariance"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> double CMotion2DEstimator::getResidualVariance </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the variance of the residual values.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a19">computeResidualVariance()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a45">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a18" doxytag="CMotion2DEstimator::getSupportSize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::getSupportSize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>size</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the normalized size of the estimated weight map. If the method returns true, the normalized support size is computed.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a16">computeSupportSize()</a>, <a class="el" href="classCMotion2DEstimator.html#a4">getWeights()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a43">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a4" doxytag="CMotion2DEstimator::getWeights"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float * CMotion2DEstimator::getWeights </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_rows</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>n_cols</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a pointer to the map containing the weights <img align="top" src="form_38.png">
 computed within the robust multiresolution estimation. The dimension of this map depends on the final estimation level considered in the pyramids. The number of rows and columns of the weight map is given respectively by <em>n_rows</em> and <em>n_cols</em>.
<p>
The weight values are in [0; 1]. A value close to 1 indicates that the corresponding pixel is conforming to the dominant motion. A value close to 0 indicates that the pixel is considered as an outlier.
<p>
This method is to use after a call to <a class="el" href="classCMotion2DEstimator.html#a2">estimate()</a>.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a2">estimate()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a48">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a23" doxytag="CMotion2DEstimator::isCovarianceMatrixComputed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::isCovarianceMatrixComputed </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indicates if the covariance matrix of the estimated 2D motion model parameters is computed.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a22">computeCovarianceMatrix()</a>, <a class="el" href="classCMotion2DEstimator.html#a24">getCovarianceMatrix()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a46">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a20" doxytag="CMotion2DEstimator::isResidualVarianceComputed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::isResidualVarianceComputed </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indicates if the variance of the estimated 2D motion model parameters is computed. In fact, it is the variance of the last estimated parameter increment.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a19">computeResidualVariance()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a44">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a17" doxytag="CMotion2DEstimator::isSupportSizeComputed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::isSupportSizeComputed </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indicates if the normalized support size is computed.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a16">computeSupportSize()</a> </dl>    </td>
  </tr>
</table>
<a name="a7" doxytag="CMotion2DEstimator::setCConstant"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setCConstant </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classCMotion2DEstimator.html#s8">ECConstType</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>C_type</em> = CConst_Fixed, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>C</em> = 8.0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the <img align="top" src="form_69.png">
 constant used to reject outliers when a robust M-estimator is used.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#s8">ECConstType()</a>, <a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS()</a>, <a class="el" href="classCMotion2DEstimator.html#a6">setRobustFunction()</a> </dl>    </td>
  </tr>
</table>
<a name="a11" doxytag="CMotion2DEstimator::setFirstEstimationLevel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::setFirstEstimationLevel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>level</em> = 3          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Defines the pyramid first level where the estimation process is starting, with: <img align="top" src="form_74.png">

<p>
At the coarsest level <em>l</em>, no prior estimation is available. The weights are set to 1 and the mimimization is started using expression <a href="classCMotion2DEstimator.html#equation1">(1)</a>. A first estimate of <img align="top" src="form_75.png">
 is then obtained and successive refinements are performed at the same level considering expression <a href="classCMotion2DEstimator.html#equation3">(3)</a> until the incremental estimate <img align="top" src="form_76.png">
 is small enough or a given number of iterations fixed by set <a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS()</a> is reached. Then, the estimated parameter <img align="top" src="form_77.png">
 is projected to the finer level, where the refinement process starts again by minimizing expression <a href="classCMotion2DEstimator.html#equation3">(3)</a>.
<p>
Returns false if the requested level is not authorized, true otherwise.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a12">getFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a13">setLastEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a14">getLastEstimationLevel()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a28">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a13" doxytag="CMotion2DEstimator::setLastEstimationLevel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CMotion2DEstimator::setLastEstimationLevel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>level</em> = 0          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the pyramid level where the estimation process is stopped, with <img align="top" src="form_74.png">

<p>
Returns false if the requested level is not authorized, true otherwise.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a11">setFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a12">getFirstEstimationLevel()</a>, <a class="el" href="classCMotion2DEstimator.html#a14">getLastEstimationLevel()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a29">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a10" doxytag="CMotion2DEstimator::setLevelParameterIntroduction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setLevelParameterIntroduction </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>level_const</em> = -1, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>level_affine</em> = -1, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>level_quadratic</em> = -1</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the different pyramid levels where respectively the constant, affine and quadratic parameters of the 2D motion model will be first introduced and estimated.
<p>
If a parameter is set to -1, the default level is used.     </td>
  </tr>
</table>
<a name="a8" doxytag="CMotion2DEstimator::setNIterationMaxIRLS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setNIterationMaxIRLS </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>niter</em> = 8          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the maximal number of iterations in the iteratively reweighted least squares (IRLS) method. IRLS first consists in evaluating the residual <img align="top" src="form_71.png">
, and, consequently the weights <img align="top" src="form_38.png">
. Then, a new estimate of <img align="top" src="form_72.png">
 is computed using the weighted least-squares technique. The weights are updated, and the process is repeated until convergence, or until the predefined number of iterations <em>niter</em> is reached.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a5">setRobustEstimator()</a>, <a class="el" href="classCMotion2DEstimator.html#a6">setRobustFunction()</a>, <a class="el" href="classCMotion2DEstimator.html#a7">setCConstant()</a> </dl>    </td>
  </tr>
</table>
<a name="a9" doxytag="CMotion2DEstimator::setNIterationMaxLevel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setNIterationMaxLevel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>niter</em> = 7          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the maximal number of iterations of IRLS performed at a given pyramid level <em>l</em> to estimate <img align="top" src="form_73.png">
.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS()</a> </dl>    </td>
  </tr>
</table>
<a name="a15" doxytag="CMotion2DEstimator::setReliableSupportRate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setReliableSupportRate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>rate</em> = 0.4          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the support percentage (<em>rate)</em> for which the estimation is considered as reliable. It must be comprised between 0.f and 1.f.     </td>
  </tr>
</table>
<a name="a5" doxytag="CMotion2DEstimator::setRobustEstimator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setRobustEstimator </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>robust</em> = true          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If <em>robust</em> is true, a robust estimator is used. Otherwise, a least-mean-square method is considered, where all the weights are set to 1.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#a6">setRobustFunction()</a>, <a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS()</a> </dl><dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="Motion2D_8cpp-example.html#a30">Motion2D.cpp</a>.</dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="CMotion2DEstimator::setRobustFunction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CMotion2DEstimator::setRobustFunction </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>function</em> = Tukey          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Defines the robust function used in the weighted least-squares resolution (IRLS). <a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction()</a> gives the list of implemented functions.
<p>
<dl compact><dt><b>See also: </b></dt><dd>
<a class="el" href="classCMotion2DEstimator.html#s7">ERobustFunction()</a>, <a class="el" href="classCMotion2DEstimator.html#a5">setRobustEstimator()</a>, <a class="el" href="classCMotion2DEstimator.html#a8">setNIterationMaxIRLS()</a>, <a class="el" href="classCMotion2DEstimator.html#a7">setCConstant()</a> </dl>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="CMotion2DEstimator_8h-source.html">CMotion2DEstimator.h</a><li><a class="el" href="CMotion2DEstimator_8cpp.html">CMotion2DEstimator.cpp</a></ul>
<hr> 
<address><small>Motion2D is Copyright &copy; 1995-2005 by <a href="http://www.inria.fr/index.en.html">Inria</a></small></address>
<address><small>This documentation was generated on 31 Jan 2005 by Fabien Spindler for 
Motion2D 1.3.11 using <a href="http://www.doxygen.org/index.html"> 
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=77 height=37></a>1.2.18 written by <a href="mailto:dimitri@stack.nl">Dimitri 
van Heesch</a>, &copy;&nbsp;1997-2005</small></address>
</body>
</html>
